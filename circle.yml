general:
  branches:
    only:
      - develop
      - /feature.*/

machine:
  environment:
    XCODE_SCHEME: test
    XCODE_WORKSPACE: test
    XCODE_PROJECT: test

  xcode:
    version: 7.3

dependencies:
  cache_directories:
    - /usr/local/Caskroom
    - /usr/local/Celler

  pre:
    - |
      if [ ! -e /usr/local/Caskroom ]; then
        brew cask install xquartz
      fi
    - |
      if [ ! -e /usr/local/Celler/wine ]; then
        brew install wine
      fi
    - |
      if [ ! -e /usr/local/Celler/mono ]; then
        brew install mono
      fi

test:
  override:
    - npm run dist:
        timeout: 600
  post:
    - mv dist $CIRCLE_ARTIFACTS
